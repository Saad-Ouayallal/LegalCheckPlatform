{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet InputFormComponent = class InputFormComponent {\n  constructor(fb) {\n    this.fb = fb;\n    this.myForm = this.fb.group({});\n  }\n  ngOnChanges(changes) {\n    this.createForm(this.jsonFormData.types);\n  }\n  createForm(types) {\n    for (const type of types) {\n      for (const control of type.values) {\n        const validatorsToAdd = [];\n        for (const [key, value] of Object.entries(control.validators)) {\n          switch (key) {\n            case 'min':\n              validatorsToAdd.push(Validators.min(value));\n              break;\n            case 'max':\n              validatorsToAdd.push(Validators.max(value));\n              break;\n            case 'required':\n              if (value) {\n                validatorsToAdd.push(Validators.required);\n              }\n              break;\n            default:\n              break;\n          }\n        }\n        this.myForm.addControl(control.name, this.fb.control(control.value, validatorsToAdd));\n      }\n    }\n  }\n  onSubmit() {\n    console.log('Form valid: ', this.myForm.valid);\n    console.log('Form values: ', this.myForm.value);\n  }\n};\n__decorate([Input()], InputFormComponent.prototype, \"jsonFormData\", void 0);\n__decorate([Input()], InputFormComponent.prototype, \"answers\", void 0);\nInputFormComponent = __decorate([Component({\n  selector: 'app-input-form',\n  templateUrl: './input-form.component.html',\n  styleUrls: ['./input-form.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})], InputFormComponent);\nexport { InputFormComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAEC,KAAK,EAA4BC,uBAAuB,QAAQ,eAAe;AACnG,SAAiCC,UAAU,QAAQ,gBAAgB;AAgC5D,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAQ7BC,YAAoBC,EAAe;IAAf,OAAE,GAAFA,EAAE;IAFf,WAAM,GAAc,IAAI,CAACA,EAAE,CAACC,KAAK,CAAC,EAAE,CAAC;EAEN;EACtCC,WAAW,CAACC,OAAsB;IAChC,IAAI,CAACC,UAAU,CAAC,IAAI,CAACC,YAAY,CAACC,KAAK,CAAC;EAC1C;EAEAF,UAAU,CAACE,KAAsB;IAC/B,KAAK,MAAMC,IAAI,IAAID,KAAK,EAAE;MACxB,KAAK,MAAME,OAAO,IAAID,IAAI,CAACE,MAAM,EAAE;QACjC,MAAMC,eAAe,GAAG,EAAE;QAC1B,KAAK,MAAM,CAACC,GAAG,EAAEC,KAAK,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACN,OAAO,CAACO,UAAU,CAAC,EAAE;UAC7D,QAAQJ,GAAG;YACT,KAAK,KAAK;cACRD,eAAe,CAACM,IAAI,CAACnB,UAAU,CAACoB,GAAG,CAACL,KAAK,CAAC,CAAC;cAC3C;YACF,KAAK,KAAK;cACRF,eAAe,CAACM,IAAI,CAACnB,UAAU,CAACqB,GAAG,CAACN,KAAK,CAAC,CAAC;cAC3C;YACF,KAAK,UAAU;cACb,IAAIA,KAAK,EAAE;gBACTF,eAAe,CAACM,IAAI,CAACnB,UAAU,CAACsB,QAAQ,CAAC;;cAE3C;YACF;cACE;UAAM;;QAIZ,IAAI,CAACC,MAAM,CAACC,UAAU,CACpBb,OAAO,CAACc,IAAI,EACZ,IAAI,CAACtB,EAAE,CAACQ,OAAO,CAACA,OAAO,CAACI,KAAK,EAAEF,eAAe,CAAC,CAChD;;;EAGP;EAEAa,QAAQ;IACNC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE,IAAI,CAACL,MAAM,CAACM,KAAK,CAAC;IAC9CF,OAAO,CAACC,GAAG,CAAC,eAAe,EAAE,IAAI,CAACL,MAAM,CAACR,KAAK,CAAC;EACjD;CACD;AA7CCe,YADChC,KAAK,EAAE,wDACoB;AAEnBgC,YAARhC,KAAK,EAAE,mDAAc;AAJXG,kBAAkB,eAN9BJ,SAAS,CAAC;EACTkC,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,6BAA6B,CAAC;EAC1CC,eAAe,EAAEnC,uBAAuB,CAACoC;CAC1C,CAAC,GACWlC,kBAAkB,CA+C9B;SA/CYA,kBAAkB","names":["Component","Input","ChangeDetectionStrategy","Validators","InputFormComponent","constructor","fb","group","ngOnChanges","changes","createForm","jsonFormData","types","type","control","values","validatorsToAdd","key","value","Object","entries","validators","push","min","max","required","myForm","addControl","name","onSubmit","console","log","valid","__decorate","selector","templateUrl","styleUrls","changeDetection","OnPush"],"sourceRoot":"","sources":["D:\\projects\\hajar\\hajar\\src\\app\\input-form\\input-form.component.ts"],"sourcesContent":["import { Component, Input, OnChanges, SimpleChanges, ChangeDetectionStrategy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n\ninterface JsonFormValidators {\n  min?: number;\n  max?: number;\n  required?: boolean;\n}\n\n\ninterface JsonFormControls {\n  name: string;\n  description: string;\n  value: string;\n  type: string;\n  validators: JsonFormValidators;\n}\n\ninterface JsonFormTypes {\n  name: string;\n  values: JsonFormControls[];\n}\nexport interface JsonFormData {\n  types: JsonFormTypes[];\n}\n\n@Component({\n  selector: 'app-input-form',\n  templateUrl: './input-form.component.html',\n  styleUrls: ['./input-form.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class InputFormComponent implements OnChanges {\n  @Input()\n  jsonFormData!: JsonFormData;\n\n  @Input() answers: any;\n\n  public myForm: FormGroup = this.fb.group({});\n\n  constructor(private fb: FormBuilder) {}\n  ngOnChanges(changes: SimpleChanges) {\n    this.createForm(this.jsonFormData.types);\n  }\n\n  createForm(types: JsonFormTypes[]) {\n    for (const type of types) {\n      for (const control of type.values) {\n        const validatorsToAdd = [];\n        for (const [key, value] of Object.entries(control.validators)) {\n          switch (key) {\n            case 'min':\n              validatorsToAdd.push(Validators.min(value));\n              break;\n            case 'max':\n              validatorsToAdd.push(Validators.max(value));\n              break;\n            case 'required':\n              if (value) {\n                validatorsToAdd.push(Validators.required);\n              }\n              break;\n            default:\n              break;\n          }\n        }\n  \n        this.myForm.addControl(\n          control.name,\n          this.fb.control(control.value, validatorsToAdd)\n        );\n      }\n    }\n  }\n\n  onSubmit() {\n    console.log('Form valid: ', this.myForm.valid);\n    console.log('Form values: ', this.myForm.value);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}